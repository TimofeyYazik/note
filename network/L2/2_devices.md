### Мост (Bridge)

Мост является устройством, которое работает на канальном уровне модели OSI и используется для соединения и фильтрации трафика между различными сегментами одной и той же сети. Он имеет MAC-таблицу, которая используется для коммутации пакетов внутри одной подсети. Когда мост получает пакет, он выполняет следующие действия:

1. **Анализ назначения пакета:**
   - Мост проверяет MAC-адрес назначения пакета и сравнивает его с записями в своей MAC-таблице.

2. **Коммутация пакета:**
   - Если адрес назначения находится в ARP-таблице, мост перенаправляет пакет к соответствующему сегменту сети.
   - Если адрес назначения не найден в таблице, пакет может быть передан на все сегменты, кроме сегмента-источника (функция, известная как "flooding").

3. **Фильтрация пакета:**
   - Мост определяет, нужно ли передавать пакет дальше или уничтожить его, чтобы избежать перегрузки сети. Например, если пакет предназначен для устройства в том же сегменте, откуда он пришел, мост уничтожает его, предотвращая ненужную передачу.

Таким образом, мост помогает уменьшить количество ненужных передач и улучшает общую производительность сети.

### Коммутатор (Switch)

Коммутатор, как и мост, работает на канальном уровне модели OSI, но является более продвинутым устройством. Он обеспечивает прямое соединение с каждым узлом сети и имеет таблицу MAC-адресов, которая связывает каждый MAC-адрес с конкретным портом коммутатора. Когда коммутатор получает пакет, он выполняет следующие действия:

1. **Анализ назначения пакета:**
   - Коммутатор проверяет MAC-адрес назначения пакета и ищет его в своей таблице MAC-адресов.

2. **Коммутация пакета:**
   - Если адрес назначения найден в таблице, коммутатор направляет пакет на соответствующий порт, соединенный с нужным узлом.
   - Если адрес назначения не найден в таблице, коммутатор отправляет широковещательный (broadcast) запрос на все порты, кроме порта-источника. Это позволяет определить, на каком порту находится узел с нужным MAC-адресом.

3. **Обучение MAC-адресов:**
   - Каждый раз, когда коммутатор получает пакет, он запоминает MAC-адрес источника и связывает его с портом, через который пакет был получен. Это позволяет коммутатору обновлять и расширять свою таблицу MAC-адресов.

4. **Фильтрация пакетов:**
   - Коммутатор фильтрует ненужные пакеты, предотвращая их широковещательную рассылку и снижая нагрузку на сеть.
### MAC-table
В сетях Ethernet, таблица MAC второго уровня (Layer 2, L2) используется для отображения MAC-адресов устройств в сетях коммутатора (switch). Она играет ключевую роль в процессе коммутирования, позволяя коммутатору отправлять кадры только на соответствующий порт, тем самым уменьшая нагрузку на сеть и улучшая ее производительность.
### Пример таблицы MAC второго уровня

| MAC-адрес         | Порт | Время жизни (TTL) | VLAN |
| ----------------- | ---- | ----------------- | ---- |
| 00:1A:2B:3C:4D:5E | 1    | 300 секунд        | 10   |
| 00:1A:2B:3C:4D:6F | 2    | 280 секунд        | 20   |
| 00:1A:2B:3C:4D:7A | 3    | 250 секунд        | 10   |
| 00:1A:2B:3C:4D:8B | 4    | 300 секунд        | 30   |
| 00:1A:2B:3C:4D:9C | 5    | 200 секунд        | 20   |

#### Описание колонок:
- **MAC-адрес:** Уникальный адрес сетевого устройства.
- **Порт:** Номер порта коммутатора, к которому подключено устройство с указанным MAC-адресом.
- **Время жизни (TTL):** Время (в секундах), после которого запись удаляется из таблицы, если не будет обновлена.
- **VLAN:** Номер виртуальной локальной сети (Virtual Local Area Network), к которой принадлежит устройство.

### Основные моменты:
- **Заполнение таблицы:** Таблица MAC второго уровня заполняется динамически, когда коммутатор получает кадры данных. Когда кадр приходит на порт, коммутатор запоминает MAC-адрес отправителя и порт, на котором кадр был получен.
- **Обновление времени жизни:** Каждый раз, когда коммутатор видит кадр от устройства, время жизни для этого MAC-адреса обновляется. Это предотвращает удаление активных записей из таблицы.
- **Удаление записей:** Записи удаляются из таблицы, если в течение определенного времени кадры от устройства не поступают.

### Пример использования:
Предположим, что коммутатор получил кадр с MAC-адресом назначения `00:1A:2B:3C:4D:5E`. Коммутатор проверяет свою MAC-таблицу и видит, что этот MAC-адрес находится на порту 1. Он направляет кадр только на порт 1, тем самым уменьшая ненужный трафик на других портах.

Эта таблица помогает коммутатору эффективно управлять передачей данных, минимизируя задержки и улучшая общую производительность сети.
Протокол ARP (Address Resolution Protocol) — это сетевой протокол, который используется для разрешения IP-адресов в MAC-адреса в рамках локальной сети (LAN). Он играет ключевую роль в обеспечении связи между устройствами в сетях Ethernet и других подобных сетях.

### Основные функции ARP: [[ARP]]

1. **Разрешение адресов**: ARP позволяет устройствам находить MAC-адрес, соответствующий заданному IP-адресу, чтобы данные могли быть правильно направлены на нужное устройство в сети.

2. **Кэширование**: Для повышения производительности и уменьшения нагрузки на сеть ARP-кэш используется для хранения недавно разрешённых пар IP-MAC адресов. Это уменьшает необходимость повторного выполнения ARP-запросов.

### Основные компоненты ARP:

- **ARP-запрос (ARP Request)**: Это сообщение, отправляемое узлом в сети, чтобы узнать MAC-адрес устройства, которое имеет определённый IP-адрес. Запрос рассылается в широковещательном формате (broadcast) на все устройства в локальной сети.

- **ARP-ответ (ARP Reply)**: Это сообщение, отправляемое узлом, который отвечает на ARP-запрос, указывая свой MAC-адрес и IP-адрес. Ответ отправляется непосредственно к узлу, который отправил запрос.

### Как работает ARP:

1. **Отправка запроса**: Когда устройство в сети (например, компьютер) хочет отправить данные другому устройству, оно проверяет свой ARP-кэш, чтобы узнать, есть ли уже в нём информация о MAC-адресе устройства с нужным IP-адресом. Если такой информации нет, оно отправляет ARP-запрос в локальную сеть.

2. **Получение ответа**: Все устройства в сети получают ARP-запрос, но только то устройство, которое имеет запрашиваемый IP-адрес, отправляет ARP-ответ с собственным MAC-адресом.

3. **Обновление кэша**: Получив ARP-ответ, устройство обновляет свой ARP-кэш и теперь может использовать полученный MAC-адрес для отправки данных непосредственно на целевое устройство.

### Пример ARP-запроса и ответа:

- **ARP-запрос**: «Какой MAC-адрес у устройства с IP-адресом 192.168.1.5?»
- **ARP-ответ**: «MAC-адрес устройства с IP-адресом 192.168.1.5 — 00:1A:2B:3C:4D:5E.»

### ARP таблица

**Уровень модели OSI:** Уровень 2 (Канальный уровень)
**Функция:**
- ARP (Address Resolution Protocol) таблица используется для преобразования IP-адресов в MAC-адреса в локальных сетях.
- Она хранит информацию о том, какие MAC-адреса соответствуют каким IP-адресам на уровне локальной сети.
**Основные поля:**
- **IP-адрес (IP Address):** IP-адрес устройства, который используется в локальной сети.
- **MAC-адрес (MAC Address):** Физический (MAC) адрес устройства, соответствующий IP-адресу.
- **Тип (Type):** Тип записи в таблице, обычно указывает на статическое или динамическое сопоставление.

| IP-адрес     | MAC-адрес         | Тип          |
| ------------ | ----------------- | ------------ |
| 192.168.1.2  | 00:1A:2B:3C:4D:5E | Динамический |
| 192.168.1.3  | 00:1A:2B:3C:4D:6F | Динамический |
| 192.168.1.10 | 00:1A:2B:3C:4D:7A | Статический  |


### Проблемы безопасности:

- **ARP-спуфинг (ARP Spoofing)**: Это атака, при которой злоумышленник отправляет поддельные ARP-ответы в сеть, чтобы изменить ARP-кэш других устройств, перенаправляя трафик на себя. Это может привести к перехвату данных или атакам «человек посередине».

### Управление ARP:

- **Команды**: В различных операционных системах можно использовать команды для управления ARP-кэшем. Например:
  - В Windows: `arp -a` для просмотра ARP-кэша, `arp -d` для удаления записей.
  - В Linux и macOS: `arp` или `ip neighbour` для аналогичных операций.

Протокол ARP является основным элементом, позволяющим сетевому оборудованию корректно взаимодействовать на уровне канала передачи данных в локальных сетях.


